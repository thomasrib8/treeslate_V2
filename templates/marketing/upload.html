<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Produit</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Marketing Produit</h1>

        <p><strong>Instructions :</strong></p>
        <p>
            1 - Copiez le script de votre choix (fiche commerciale ou fiche produit).<br>
            2 - Cliquez sur le bouton "Cr√©er ma fiche".<br>
            3 - Collez le script dans ChatGPT et importez le document du livre.<br>
            4 - Laissez ChatGPT g√©n√©rer votre fiche.<br>
            5 - Importez la fiche dans le module ci-dessous pour la sauvegarder dans l'application.
        </p>

        <div class="prompts-container">
            <!-- Fiche Commerciale -->
            <div class="prompt-box">
                <h2>Fiche Commerciale</h2>
                <textarea id="commercialPrompt" readonly>
√Ä partir du fichier, g√©n√®re une fiche commerciale d√©taill√©e de ce livre de magie avec les sections suivantes :

1. **Titre et Auteur** :
   - Extrais le titre exact et le nom de l'auteur directement du texte analys√©.
   
2. **Pr√©sentation G√©n√©rale** (pas de listes √† puces ni de tirets) :
   - Pr√©sente le livre en pr√©cisant son titre, son auteur, et le contexte de cr√©ation.
   - D√©veloppe l'objectif principal du livre et donne un aper√ßu des th√©matiques abord√©es.
   - R√©dige une description commerciale approfondie du livre en mettant en avant son originalit√© et son contenu unique.

3. **R√©sum√© des Chapitres** :
   - D√©cris chaque chapitre ou tour de magie pr√©sent√© dans le livre.
   - Donne un titre s'il est mentionn√©.
   - R√©sume en quelques phrases le contenu du chapitre ou du tour (sans d√©voiler les secrets).
   - D√©cris les effets magiques et leur impact.

4. **Description des Effets Magiques** :
   - D√©taille les effets magiques expliqu√©s dans le livre sans r√©v√©ler les secrets techniques.
   - Explique pourquoi ils captivent l‚Äôaudience.

5. **Points Forts** (liste √† puces) :
   - Originalit√© des tours ou techniques.
   - Approche p√©dagogique et facilit√© de compr√©hension.
   - Adaptabilit√© des tours √† diff√©rents contextes.
   - Philosophie ou th√©ories sur la magie d√©velopp√©es par l'auteur.

6. **Conclusion** :
   - R√©sume les points cl√©s du livre.
   - Incite √† la lecture ou √† l'achat en mettant en avant les b√©n√©fices pour le lecteur.

Fais-moi un rendu sous la forme d'un document Word de type .docx.
Le document devra √™tre dans la langue anglaise.
                </textarea>
                <button onclick="copyToClipboard('commercialPrompt')">Copier</button>
            </div>

            <!-- Fiche Produit Shopify -->
            <div class="prompt-box">
                <h2>Fiche Produit Shopify</h2>
                <textarea id="shopifyPrompt" readonly>
√Ä partir du fichier, g√©n√®re une fiche produit d√©taill√©e d'un livre de magie pour un site internet :

1. **Titre et Auteur** :
   - Extrais et pr√©sente le titre du livre et le nom de l‚Äôauteur depuis le texte.

2. **Introduction et Description Commerciale** :
   - D√©veloppe une introduction engageante pr√©cisant l‚Äôobjectif principal du livre et les th√®mes abord√©s.
   - R√©dige une description approfondie en mettant en avant l‚Äôoriginalit√© du livre et son apport pour les magiciens.

3. **R√©sum√© des Chapitres** :
   - R√©sume chaque chapitre en expliquant les effets magiques d√©crits (sans d√©voiler les secrets techniques).
   - Explique comment ces effets aident les magiciens dans leur pratique.

4. **Description des Effets Magiques** :
   - D√©cris les tours de magie et leurs effets sur les spectateurs.
   - Explique pourquoi ces effets se d√©marquent.

5. **Points Forts** (liste √† puces) :
   - Originalit√© et pertinence des effets magiques.
   - Accessibilit√© pour diff√©rents niveaux de magiciens.
   - Philosophie unique de l‚Äôauteur sur la magie.
   - Adaptabilit√© des tours aux contextes vari√©s.

6. **Appel √† l‚ÄôAction** :
   - Termine par un appel √† l‚Äôaction engageant pour inciter √† l‚Äôachat.

Fais-moi un rendu sous la forme de 2 documents Word de type .docx.
Un document en anglais et l'autre en fran√ßais.
                </textarea>
                <button onclick="copyToClipboard('shopifyPrompt')">Copier</button>
            </div>
        </div>

        <!-- Lien vers ChatGPT -->
        <a href="https://chatgpt.com/" target="_blank" class="button">Aller sur ChatGPT</a>

        <!-- Section Upload -->
        <h2>Uploader un fichier :</h2>
        <form id="upload-form" action="{{ url_for('marketing.upload_marketing_file') }}" method="post" enctype="multipart/form-data">
            <input type="file" name="file" required>
            <button type="submit">Uploader</button>
        </form>
        
        <!-- Message de confirmation -->
        <div id="upload-message" style="display: none; color: green; margin-top: 10px;"></div>
        
        <!-- Liste des fichiers disponibles -->
        <h2>Fichiers disponibles :</h2>
        <button onclick="fetchFiles()">üîÑ Rafra√Æchir la liste</button>
        <ul id="file-list"></ul>


        <!-- Bouton Menu Principal -->
        <button class="menu-button" onclick="goToMainMenu()">Menu Principal</button>
    </div>

    <script>
    function copyToClipboard(id) {
        var copyText = document.getElementById(id);
        copyText.select();
        document.execCommand("copy");
        alert("Le prompt a √©t√© copi√© !");
    }

    function goToMainMenu() {
        window.location.href = "/";
    }

    // Fonction pour r√©cup√©rer et afficher les fichiers upload√©s
    async function fetchFiles() {
        try {
            const response = await fetch("{{ url_for('marketing.get_uploaded_files') }}");
            if (!response.ok) throw new Error(`Erreur HTTP : ${response.status}`);
    
            const files = await response.json();
            const list = document.getElementById('file-list');
            list.innerHTML = "";  // Vide la liste avant de la remplir
    
            if (files.length === 0) {
                list.innerHTML = "<p>Aucun fichier disponible.</p>";
            } else {
                files.forEach(file => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="/marketing/download/${file.filename}" download>${file.filename}</a>`;
                    list.appendChild(li);
                });
            }
        } catch (error) {
            console.error("Erreur lors de la r√©cup√©ration des fichiers :", error);
            document.getElementById('file-list').innerHTML = "<p>Erreur lors du chargement des fichiers.</p>";
        }
    }
    
    // Gestion de l'upload avec affichage du message et mise √† jour de la liste
    document.getElementById("upload-form").addEventListener("submit", async function(event) {
        event.preventDefault();
    
        var formData = new FormData(this);
        try {
            const response = await fetch("{{ url_for('marketing.upload_marketing_file') }}", {
                method: "POST",
                body: formData
            });
    
            if (!response.ok) throw new Error(`Erreur HTTP : ${response.status}`);
            
            const data = await response.json();
            let messageElement = document.getElementById("upload-message");
            messageElement.style.display = "block";
    
            if (data.success) {
                messageElement.textContent = "Fichier " + data.filename + " upload√© avec succ√®s.";
                messageElement.style.color = "green";
                fetchFiles(); // Met √† jour la liste apr√®s l'upload
            } else {
                messageElement.textContent = "Erreur : " + data.error;
                messageElement.style.color = "red";
            }
        } catch (error) {
            console.error("Erreur lors de l'upload :", error);
            let messageElement = document.getElementById("upload-message");
            messageElement.style.display = "block";
            messageElement.textContent = "Erreur lors de l'upload du fichier.";
            messageElement.style.color = "red";
        }
    });
    
    // Charger la liste des fichiers au chargement de la page
    fetchFiles();
</script>

</body>
</html>
